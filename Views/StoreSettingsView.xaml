<?xml version="1.0" encoding="utf-8" ?>
<ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             x:Class="Mobappg4v2.Views.StoreSettingsView"
             Title="Store Settings">
    <ScrollView>
        <VerticalStackLayout Padding="20" Spacing="20">
            <!-- Store Profile -->
            <Frame BorderColor="LightGray" CornerRadius="10" Padding="15">
                <VerticalStackLayout Spacing="15">
                    <Label Text="Store Profile"
                           FontSize="18"
                           FontAttributes="Bold"/>

                    <!-- Store Banner -->
                    <Frame HeightRequest="150" 
                           Padding="0"
                           IsClippedToBounds="True">
                        <Grid>
                            <Image Source="{Binding Settings.BannerUrl}"
                                   Aspect="AspectFill"/>
                            <Button Text="Change Banner"
                                    Command="{Binding ChangeBannerCommand}"
                                    VerticalOptions="End"
                                    Margin="10"
                                    BackgroundColor="#80000000"
                                    TextColor="White"/>
                        </Grid>
                    </Frame>

                    <!-- Store Logo -->
                    <Grid ColumnDefinitions="Auto,*" ColumnSpacing="15">
                        <Frame Grid.Column="0"
                               HeightRequest="80"
                               WidthRequest="80"
                               Padding="0"
                               IsClippedToBounds="True">
                            <Grid>
                                <Image Source="{Binding Settings.LogoUrl}"
                                       Aspect="AspectFill"/>
                                <Button Text="Change"
                                        Command="{Binding ChangeLogoCommand}"
                                        VerticalOptions="End"
                                        HeightRequest="25"
                                        FontSize="12"
                                        BackgroundColor="#80000000"
                                        TextColor="White"/>
                            </Grid>
                        </Frame>

                        <VerticalStackLayout Grid.Column="1" Spacing="10">
                            <Entry Placeholder="Store Name"
                                   Text="{Binding Settings.StoreName}"/>
                            <Editor Placeholder="Store Description"
                                    Text="{Binding Settings.Description}"
                                    AutoSize="TextChanges"
                                    MaxLength="500"/>
                        </VerticalStackLayout>
                    </Grid>
                </VerticalStackLayout>
            </Frame>

            <!-- Business Information -->
            <Frame BorderColor="LightGray" CornerRadius="10" Padding="15">
                <VerticalStackLayout Spacing="15">
                    <Label Text="Business Information"
                           FontSize="18"
                           FontAttributes="Bold"/>

                    <Picker Title="Business Type"
                            ItemsSource="{Binding BusinessTypes}"
                            SelectedItem="{Binding Settings.BusinessType}"/>

                    <Entry Placeholder="Registration Number"
                           Text="{Binding Settings.RegistrationNumber}"/>

                    <Entry Placeholder="Tax ID"
                           Text="{Binding Settings.TaxId}"/>

                    <Entry Placeholder="Email"
                           Text="{Binding Settings.Email}"
                           Keyboard="Email"/>

                    <Entry Placeholder="Phone"
                           Text="{Binding Settings.Phone}"
                           Keyboard="Telephone"/>

                    <Entry Placeholder="Address"
                           Text="{Binding Settings.Address}"/>

                    <Grid ColumnDefinitions="*,*" ColumnSpacing="10">
                        <Entry Grid.Column="0"
                               Placeholder="City"
                               Text="{Binding Settings.City}"/>
                        <Entry Grid.Column="1"
                               Placeholder="State"
                               Text="{Binding Settings.State}"/>
                    </Grid>

                    <Grid ColumnDefinitions="*,*" ColumnSpacing="10">
                        <Entry Grid.Column="0"
                               Placeholder="Postal Code"
                               Text="{Binding Settings.PostalCode}"/>
                        <Entry Grid.Column="1"
                               Placeholder="Country"
                               Text="{Binding Settings.Country}"/>
                    </Grid>
                </VerticalStackLayout>
            </Frame>

            <!-- Payment Settings -->
            <Frame BorderColor="LightGray" CornerRadius="10" Padding="15">
                <VerticalStackLayout Spacing="15">
                    <Label Text="Payment Settings"
                           FontSize="18"
                           FontAttributes="Bold"/>

                    <Label Text="Accepted Payment Methods"
                           FontAttributes="Bold"/>
                    <CollectionView ItemsSource="{Binding PaymentMethods}"
                                  SelectionMode="Multiple"
                                  SelectedItems="{Binding Settings.AcceptedPaymentMethods}">
                        <CollectionView.ItemTemplate>
                            <DataTemplate>
                                <Grid Padding="0,5">
                                    <CheckBox IsChecked="{Binding IsSelected}"
                                            VerticalOptions="Center"/>
                                    <Label Text="{Binding Name}"
                                           VerticalOptions="Center"
                                           Margin="40,0,0,0"/>
                                </Grid>
                            </DataTemplate>
                        </CollectionView.ItemTemplate>
                    </CollectionView>

                    <BoxView HeightRequest="1" 
                            Color="LightGray"
                            Margin="0,10"/>

                    <Label Text="Bank Account Details"
                           FontAttributes="Bold"/>
                    <Entry Placeholder="Bank Name"
                           Text="{Binding Settings.BankName}"/>
                    <Entry Placeholder="Account Number"
                           Text="{Binding Settings.AccountNumber}"/>
                    <Entry Placeholder="Account Holder Name"
                           Text="{Binding Settings.AccountHolderName}"/>
                    <Entry Placeholder="SWIFT Code"
                           Text="{Binding Settings.SwiftCode}"/>
                </VerticalStackLayout>
            </Frame>

            <!-- Shipping Settings -->
            <Frame BorderColor="LightGray" CornerRadius="10" Padding="15">
                <VerticalStackLayout Spacing="15">
                    <Label Text="Shipping Settings"
                           FontSize="18"
                           FontAttributes="Bold"/>

                    <Grid RowDefinitions="Auto,Auto,Auto,Auto" RowSpacing="15">
                        <!-- Local Delivery -->
                        <Grid Grid.Row="0" ColumnDefinitions="*,Auto" ColumnSpacing="15">
                            <Label Text="Offer Local Delivery"
                                   Grid.Column="0"
                                   VerticalOptions="Center"/>
                            <Switch Grid.Column="1"
                                    IsToggled="{Binding Settings.OffersLocalDelivery}"/>
                        </Grid>

                        <!-- International Shipping -->
                        <Grid Grid.Row="1" ColumnDefinitions="*,Auto" ColumnSpacing="15">
                            <Label Text="Offer International Shipping"
                                   Grid.Column="0"
                                   VerticalOptions="Center"/>
                            <Switch Grid.Column="1"
                                    IsToggled="{Binding Settings.OffersInternationalShipping}"/>
                        </Grid>

                        <!-- Minimum Order Amount -->
                        <VerticalStackLayout Grid.Row="2" Spacing="5">
                            <Label Text="Minimum Order Amount"
                                   FontSize="14"/>
                            <Entry Placeholder="Enter minimum order amount"
                                   Text="{Binding Settings.MinimumOrderAmount}"
                                   Keyboard="Numeric"/>
                        </VerticalStackLayout>

                        <!-- Free Shipping Threshold -->
                        <VerticalStackLayout Grid.Row="3" Spacing="5">
                            <Label Text="Free Shipping Threshold"
                                   FontSize="14"/>
                            <Entry Placeholder="Enter free shipping threshold"
                                   Text="{Binding Settings.FreeShippingThreshold}"
                                   Keyboard="Numeric"/>
                        </VerticalStackLayout>
                    </Grid>

                    <Button Text="Manage Shipping Zones"
                            Command="{Binding ManageShippingZonesCommand}"
                            BackgroundColor="#007AFF"
                            TextColor="White"
                            Margin="0,10,0,0"/>
                </VerticalStackLayout>
            </Frame>

            <!-- Notification Preferences -->
            <Frame BorderColor="LightGray" CornerRadius="10" Padding="15">
                <VerticalStackLayout Spacing="15">
                    <Label Text="Notification Preferences"
                           FontSize="18"
                           FontAttributes="Bold"/>

                    <Grid RowDefinitions="Auto,Auto,Auto,Auto,Auto" RowSpacing="15">
                        <!-- Email Notifications -->
                        <Grid Grid.Row="0" ColumnDefinitions="*,Auto" ColumnSpacing="15">
                            <Label Text="Email Notifications"
                                   Grid.Column="0"
                                   VerticalOptions="Center"/>
                            <Switch Grid.Column="1"
                                    IsToggled="{Binding Settings.EmailNotifications}"/>
                        </Grid>

                        <!-- Push Notifications -->
                        <Grid Grid.Row="1" ColumnDefinitions="*,Auto" ColumnSpacing="15">
                            <Label Text="Push Notifications"
                                   Grid.Column="0"
                                   VerticalOptions="Center"/>
                            <Switch Grid.Column="1"
                                    IsToggled="{Binding Settings.PushNotifications}"/>
                        </Grid>

                        <!-- Order Updates -->
                        <Grid Grid.Row="2" ColumnDefinitions="*,Auto" ColumnSpacing="15">
                            <Label Text="Order Updates"
                                   Grid.Column="0"
                                   VerticalOptions="Center"/>
                            <Switch Grid.Column="1"
                                    IsToggled="{Binding Settings.OrderNotifications}"/>
                        </Grid>

                        <!-- Messages -->
                        <Grid Grid.Row="3" ColumnDefinitions="*,Auto" ColumnSpacing="15">
                            <Label Text="Messages"
                                   Grid.Column="0"
                                   VerticalOptions="Center"/>
                            <Switch Grid.Column="1"
                                    IsToggled="{Binding Settings.MessageNotifications}"/>
                        </Grid>

                        <!-- Promotional Updates -->
                        <Grid Grid.Row="4" ColumnDefinitions="*,Auto" ColumnSpacing="15">
                            <Label Text="Promotional Updates"
                                   Grid.Column="0"
                                   VerticalOptions="Center"/>
                            <Switch Grid.Column="1"
                                    IsToggled="{Binding Settings.PromotionalNotifications}"/>
                        </Grid>
                    </Grid>
                </VerticalStackLayout>
            </Frame>

            <!-- Save Button -->
            <Button Text="Save Changes"
                    Command="{Binding SaveChangesCommand}"
                    BackgroundColor="#34C759"
                    TextColor="White"
                    HeightRequest="50"
                    FontAttributes="Bold"
                    Margin="0,0,0,20"/>
        </VerticalStackLayout>
    </ScrollView>
</ContentPage> 